webpackJsonp([8],{"+Xm1":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=this&&this.__decorate||function(t,e,n,r){var s,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(s,a){function i(t){try{l(r.next(t))}catch(t){a(t)}}function o(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){t.done?s(t.value):new n(function(e){e(t.value)}).then(i,o)}l((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(s)throw new TypeError("Generator is already executing.");for(;l;)try{if(s=1,a&&(i=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(i=l.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(t){n=[6,t],a=0}finally{s=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var s,a,i,o,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o};Object.defineProperty(e,"__esModule",{value:!0});var l=n("/5sW"),c=n("c+8m"),p=n("PPZq"),u=n("6nHw"),d=n("VKSY"),f=function(t){function e(){var e=t.call(this)||this;return e.network=".test",e.nnsstr="",e.domainerr=!1,e.receive_disable=!0,e.mapping_err="",e.errmsg="",e.btn_register=!0,e.verifyDomainNumber=0,e.alert_addr="",e.alert_domain="",e.alert_contract="0xabb0f1f3f035dd7ad80ca805fce58d62c517cc6b",e.alert_resolve=!0,e.alert_resolver_disable=!1,e.alert_mapping_disable=!1,e.alert_config_state=0,e.alert_resolver_state=0,e.domainarr=new Array,Neo.Cryptography.RandomNumberGenerator.startCollectors(),e}return r(e,t),e.prototype.mounted=function(){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,d.tools.nnstool.initRootDomain("test")];case 1:return t.sent(),d.tools.nnstool.initStatus(),this.getDomainsByAddr(),[2]}})})},e.prototype.verifyDomain=function(){return i(this,void 0,void 0,function(){var t,e,n,r;return o(this,function(s){switch(s.label){case 0:return this.nnsstr=this.nnsstr.toLowerCase(),this.nnsstr=this.nnsstr.trim(),t=/^[a-zA-Z0-9]{1,32}$/,t.test(this.nnsstr)?[4,d.tools.nnstool.queryDomainInfo(this.nnsstr+".test")]:[3,2];case 1:return e=s.sent(),e.register&&e.ttl?(n=(new Date).getTime(),r=new Neo.BigInteger(n).compareTo(new Neo.BigInteger(e.ttl).multiply(1e3)),r<0?(this.errmsg=""+this.$t("nns.err1"),this.domainerr=!0):(this.errmsg="",this.domainerr=!1)):(this.domainerr=!1,this.errmsg=""),[3,3];case 2:return this.domainerr=!0,this.errmsg=""+this.$t("nns.alertmessage2"),[2];case 3:return[2]}})})},e.prototype.verifyMappingAddress=function(){var t=d.tools.neotool.verifyAddress(this.alert_addr);return this.mapping_err=t?"0":"1",t},e.prototype.nnsRegister=function(){return i(this,void 0,void 0,function(){var t,e,n;return o(this,function(r){switch(r.label){case 0:if(this.verifyDomain(),this.domainerr)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,d.tools.nnstool.registerDomain(this.nnsstr)];case 2:return t=r.sent(),t.err?console.error(t.info):(e=new u.DomainStatus,e.await_register=!0,e.domainname=this.nnsstr+".test",u.DomainStatus.setStatus(e),this.getDomainsByAddr(),this.btn_register=!0),[3,4];case 3:return n=r.sent(),mui.alert(n.message),[3,4];case 4:return[2]}})})},e.prototype.getDomainsByAddr=function(){return i(this,void 0,void 0,function(){var t,e,n,r,s,a,i,l,c,p,f,v,_,m,g=this;return o(this,function(o){switch(o.label){case 0:return[4,d.tools.wwwtool.getnnsinfo(u.LoginInfo.getCurrentAddress())];case 1:if(t=o.sent(),console.log(t),e=t?t.map(function(t){return t.domain}):[],n=new Array,r=u.DomainStatus.getStatus())for(s in r)r.hasOwnProperty(s)&&((a=e.includes(s))||e.push(s));i=[];for(l in e)i.push(l);c=0,o.label=2;case 2:return c<i.length?(p=i[c],e.hasOwnProperty(p)?(f=parseInt(p),v=e[f],_=r[v]?r[v]:new u.DomainStatus,[4,this.queryDomainInfo(v)]):[3,4]):[3,5];case 3:m=o.sent(),_.await_resolver&&(_.resolver==m.resolver?(_.await_resolver=!1,m.await_resolver=!1):m.await_resolver=!0),_.await_mapping&&(_.mapping==m.mapping?(_.await_mapping=!1,m.await_mapping=!1):m.await_mapping=!0),n.push(m),o.label=4;case 4:return c++,[3,2];case 5:return sessionStorage.setItem("domain-status",JSON.stringify(r||{})),this.domainarr=n.reverse(),this.alert_domain&&n.map(function(t){t.domainname==g.alert_domain&&(t.await_resolver?g.alert_resolver_state=1:t.resolver?g.alert_resolver_state=2:g.alert_resolver_state=0,t.await_mapping?g.alert_config_state=1:t.mapping?g.alert_config_state=2:g.alert_config_state=0)}),[2]}})})},e.prototype.queryDomainInfo=function(t){return i(this,void 0,void 0,function(){var e,n,r,s,a,i;return o(this,function(o){switch(o.label){case 0:return e=new u.Domainmsg,e.domainname=t,[4,d.tools.nnstool.queryDomainInfo(t)];case 1:return n=o.sent(),n.ttl&&"0"!=n.ttl?(this.receive_disable=!1,r=(new Date).getTime(),s=new Neo.BigInteger(r).compareTo(new Neo.BigInteger(n.ttl).multiply(1e3)),e.isExpiration=!(s<0),e.time=d.tools.timetool.getTime(parseInt(n.ttl)),e.await_resolver=!1,n.resolver?(a=n.resolver.toString(),[4,d.tools.nnstool.resolveData(t)]):[3,3]):[3,5];case 2:return i=o.sent(),e.mapping=i,e.resolver=a,[3,4];case 3:e.resolver="",e.mapping="",o.label=4;case 4:return[3,6];case 5:e.await_register=!0,e.isExpiration=!1,o.label=6;case 6:return[2,e]}})})},e.prototype.resolve=function(t){return i(this,void 0,void 0,function(){var e,n,r,s,a;return o(this,function(i){return this.alert_domainmsg=t,e=this.alert_domainmsg.domainname,this.alert_domain=e,this.alert_addr=this.alert_domainmsg.mapping,this.mapping_err="",t&&(n=!!t.await_mapping,r=!!t.mapping,s=!!t.await_resolver,a=!!t.resolver,this.alert_resolver_state=s?1:a?2:0,this.alert_config_state=n?1:r?2:0),this.$refs.alert.show=!0,[2]})})},e.prototype.setresolve=function(){return i(this,void 0,void 0,function(){var t,e,n;return o(this,function(r){switch(r.label){case 0:return this.alert_resolve=!1,this.alert_resolver_state=1,t=this.alert_contract.hexToBytes().reverse(),[4,d.tools.nnstool.setResolve(this.alert_domain,t)];case 1:return e=r.sent(),n=new u.DomainStatus,n.await_resolver=!0,n.domainname=this.alert_domain,n.resolver=this.alert_contract.hexToBytes().reverse().toHexString(),u.DomainStatus.setStatus(n),this.getDomainsByAddr(),[2]}})})},e.prototype.configResolve=function(){return i(this,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:return this.verifyMappingAddress()?[4,d.tools.nnstool.setResolveData(this.alert_domain,this.alert_addr,this.alert_domainmsg.resolver)]:[3,2];case 1:t=n.sent(),this.alert_config_state=1,e=new u.DomainStatus,e.await_mapping=!0,e.domainname=this.alert_domain,e.mapping=this.alert_addr,u.DomainStatus.setStatus(e),this.getDomainsByAddr(),n.label=2;case 2:return[2]}})})},e.prototype.awaitHeight=function(){return i(this,void 0,void 0,function(){var t,e,n,r=this;return o(this,function(s){switch(s.label){case 0:return t=d.tools.storagetool.getStorage("current-height"),[4,d.tools.wwwtool.api_getHeight()];case 1:return e=s.sent(),n=e,t?n=parseInt(t):d.tools.storagetool.setStorage("current-height",e+""),n<e&&(this.getDomainsByAddr(),n++,d.tools.storagetool.setStorage("current-height",n+"")),[4,setTimeout(function(){r.awaitHeight()},3e4)];case 2:return s.sent(),[2]}})})},e=s([c.default({components:{"wallet-layout":p.default}}),a("design:paramtypes",[])],e)}(l.default);e.default=f},"3iO8":function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"\n.correct-icon[data-v-1f18b57d] {\r\n  position: absolute;\r\n  top: 17px;\r\n  left: 614px;\n}\n.input-err[data-v-1f18b57d] {\r\n  box-shadow: 0 0 3px 0 rgba(255, 106, 106, 0.5);\n}\n.input-success[data-v-1f18b57d] {\r\n  box-shadow: 0 0 3px 0 rgba(45, 222, 79, 0.5);\n}\n.err-color[data-v-1f18b57d] {\r\n  color: #ff6a6a;\n}\n.container .form-inline[data-v-1f18b57d] {\r\n  background: #454f60;\r\n  padding-top: 50px;\r\n  padding-bottom: 60px;\r\n  border-radius: 5px;\r\n  margin-bottom: 20px;\r\n  position: relative;\n}\n.right-box[data-v-1f18b57d] {\r\n  position: absolute;\r\n  top: 50%;\r\n  right: 30px;\r\n  margin-top: -19px;\n}\n.nns-register[data-v-1f18b57d] {\r\n  background: #454f60;\r\n  border: 1px solid #b2b2b2;\r\n  border-radius: 5px;\r\n  width: 400px;\r\n  margin-bottom: 0px;\r\n  height: 56px;\r\n  margin-left: 50px;\n}\n.nns-register > input[data-v-1f18b57d],\r\n.nns-register > span[data-v-1f18b57d] {\r\n  background: #454f60;\r\n  border: 0;\r\n  height: 56px;\r\n  line-height: 16px;\r\n  font-size: 16px;\r\n  margin: 0 auto;\n}\n.container .form-inline > input[data-v-1f18b57d] {\r\n  background: #454f60;\r\n  border: 1px solid #b2b2b2;\r\n  border-radius: 5px;\r\n  width: 400px;\r\n  margin-bottom: 0px;\r\n  height: 56px;\r\n  margin-left: 50px;\n}\n.domainname[data-v-1f18b57d] {\r\n  font-family: PingFangSC-Medium;\r\n  font-size: 16px;\r\n  color: #ffffff;\r\n  line-height: 16px;\r\n  padding-left: 50px;\n}\n.msg-null[data-v-1f18b57d] {\r\n  font-family: PingFangSC-Medium;\r\n  font-size: 14px;\r\n  color: #c5c5c5;\r\n  line-height: 14px;\r\n  padding-left: 50px;\n}\n.msg-resolver[data-v-1f18b57d] {\r\n  font-family: PingFangSC-Medium;\r\n  font-size: 14px;\r\n  color: #ffffff;\r\n  line-height: 14px;\r\n  padding-left: 50px;\n}\n.state-lable[data-v-1f18b57d] {\r\n  color: darkgoldenrod;\n}\nh4[data-v-1f18b57d] {\r\n  margin-left: 20px;\n}\np[data-v-1f18b57d] {\r\n  text-align: center;\n}\r\n",""])},"8c3E":function(t,e,n){var r=n("3iO8");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("714e53ea",r,!0)},"RN/i":function(t,e,n){"use strict";function r(t){n("8c3E")}Object.defineProperty(e,"__esModule",{value:!0});var s=n("+Xm1"),a=n.n(s),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"container "},[r("div",{staticClass:"title"},[r("span",[t._v(t._s(t.$t("nns.title1")))])]),t._v(" "),r("div",{staticClass:"form-inline"},[r("div",{staticClass:"input-group nns-register",class:t.domainerr?"input-err":"input-success"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.nnsstr,expression:"nnsstr"}],staticClass:"nel",attrs:{type:"text",placeholder:t.$t("nns.placeholder1"),autocomplete:"off"},domProps:{value:t.nnsstr},on:{input:[function(e){e.target.composing||(t.nnsstr=e.target.value)},t.verifyDomain]}}),t._v(" "),r("span",{staticClass:"input-group-addon nel "},[r("span",[t._v(t._s(t.network))])])]),t._v(" "),t.btn_register?r("button",{staticClass:"btn btn-nel btn-big",on:{click:t.nnsRegister}},[t._v(t._s(t.$t("nns.register")))]):r("spinner-wrap",{staticStyle:{"margin-left":"20px"}}),t._v(" "),r("div",{staticClass:"err-color",staticStyle:{"padding-left":"50px","padding-top":"10px"}},[r("span",[t._v(t._s(t.errmsg))])])],1),t._v(" "),r("div",{staticClass:"title"},[r("span",[t._v(t._s(t.$t("nns.title2")))]),t._v(" "),r("div",{staticStyle:{display:"inline-block"}},[r("bubble-wrap",{attrs:{isdisable:t.receive_disable}})],1)]),t._v(" "),t._l(t.domainarr,function(e){return r("div",{key:e.index,staticClass:"form-inline"},[r("div",{staticClass:"left-box"},[r("span",{staticClass:"domainname"},[t._v("\n            "+t._s(e.domainname)+"\n          ")]),t._v(" "),r("br"),t._v(" "),r("span",{staticClass:"msg-resolver"},[t._v("( "+t._s(t.$t("nns.text1"))+" : "+t._s(e.resolver)+") "),r("br")]),t._v(" "),r("span",{staticClass:"msg-resolver"},[t._v("( "+t._s(t.$t("nns.text2"))+" : "+t._s(e.mapping)+")"),r("br")]),t._v(" "),r("span",{staticClass:"msg-resolver"},[t._v("( "+t._s(t.$t("nns.text3"))+" : "+t._s(e.time)+")\n          ")]),t._v(" "),r("span",{staticClass:"msg-resolver state-lable"},[t._v(t._s(e.isExpiration?"("+t.$t("nns.text4")+")":"")+" "+t._s(e.await_register?"("+t.$t("nns.waiting")+")":""))])]),t._v(" "),r("div",{staticClass:"right-box"},[e.await_register?t._e():r("button",{staticClass:"btn btn-nel",on:{click:function(n){t.resolve(e)}}},[t._v(t._s(t.$t("nns.edit")))])])])})],2),t._v(" "),r("v-alert",{ref:"alert"},[r("div",{staticClass:"content content-file"},[r("span",{staticClass:"content-des"},[t._v(t._s(t.$t("nns.alerttitle1"))+" : "+t._s(t.alert_domain))]),t._v(" "),r("span",{staticClass:"content-msg"})]),t._v(" "),r("div",{staticClass:"content content-verify"},[r("span",{staticClass:"content-des"},[t._v(t._s(t.$t("nns.alerttitle2"))+" : ")]),t._v(" "),r("span",{staticClass:"content-msg warning-msg"},[t._v("( "+t._s(t.$t("nns.alertmessage1"))+" )")]),t._v(" "),r("div",{staticClass:"input-warp"},[r("input",{staticClass:"input-ico input-disabled",attrs:{type:"text",disabled:"disable",autocomplete:"off"},domProps:{value:t.alert_contract}}),t._v(" "),2==t.alert_resolver_state?r("span",{staticClass:"correct-icon"},[r("img",{attrs:{src:n("wtuE"),alt:""}})]):t._e(),t._v(" "),r("div",{staticClass:"btn-verify-warp"},[0==t.alert_resolver_state?r("button",{staticClass:"btn-nel btn-verify ",on:{click:function(e){t.setresolve()}}},[t._v(t._s(t.$t("btn.confirm")))]):t._e(),t._v(" "),1==t.alert_resolver_state?r("spinner-wrap"):t._e(),t._v(" "),2==t.alert_resolver_state?r("button",{staticClass:"btn-nel btn-verify ",on:{click:function(e){t.setresolve()}}},[t._v(t._s(t.$t("btn.reset")))]):t._e()],1)])]),t._v(" "),r("div",{staticClass:"content content-verify"},[r("span",{staticClass:"content-des"},[t._v(t._s(t.$t("nns.alerttitle3"))+" : ")]),t._v(" "),r("span",{staticClass:"content-msg"}),t._v(" "),r("div",{staticClass:"input-warp"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.alert_addr,expression:"alert_addr"}],staticClass:"input-ico",class:"0"==t.mapping_err?"input-success":"1"==t.mapping_err?"input-err":"",attrs:{type:"text",autocomplete:"off"},domProps:{value:t.alert_addr},on:{input:[function(e){e.target.composing||(t.alert_addr=e.target.value)},t.verifyMappingAddress]}}),t._v(" "),2==t.alert_config_state?r("span",{staticClass:"correct-icon"},[r("img",{attrs:{src:n("wtuE"),alt:""}})]):t._e(),t._v(" "),r("div",{staticClass:"btn-verify-warp",staticStyle:{"margin-left":"25px"}},[0==t.alert_config_state?r("button",{staticClass:"btn-nel btn-verify",on:{click:function(e){t.configResolve()}}},[t._v(t._s(t.$t("btn.confirm")))]):t._e(),t._v(" "),2==t.alert_config_state?r("button",{staticClass:"btn-nel btn-verify",on:{click:function(e){t.configResolve()}}},[t._v(t._s(t.$t("btn.reset")))]):t._e(),t._v(" "),1==t.alert_config_state?r("spinner-wrap"):t._e()],1)]),t._v(" "),"1"==t.mapping_err?r("div",{staticClass:"err-color"},[t._v(t._s(t.$t("nns.alertmessage2"))+" ")]):t._e()])])],1)},o=[],l={render:i,staticRenderFns:o},c=l,p=n("VU/8"),u=r,d=p(a.a,c,!1,u,"data-v-1f18b57d",null);e.default=d.exports}});